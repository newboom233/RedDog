# è‹±é›„è”ç›ŸLCUç›‘æ§åŠŸèƒ½ - æ”¹è¿›ç‰ˆ

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

åŸºäº[Riot API Libraries](https://riot-api-libraries.readthedocs.io/en/latest/)å’Œ[lol-helper](https://github.com/za123/lol-helper)é¡¹ç›®çš„æœ€ä½³å®è·µï¼Œæˆ‘ä»¬æ”¹è¿›äº†LCU (League Client Update) APIç›‘æ§åŠŸèƒ½ï¼Œæä¾›æ›´ç¨³å®šã€æ›´å¼ºå¤§çš„è‹±é›„è”ç›Ÿæ¸¸æˆæ•°æ®è·å–èƒ½åŠ›ã€‚

## ğŸš€ ä¸»è¦æ”¹è¿›

### 1. æ›´ç¨³å®šçš„è¿›ç¨‹æ£€æµ‹
- âœ… å¤šç§å‘½ä»¤å°è¯•ï¼š`wmic`ã€`tasklist`ã€PowerShellå‘½ä»¤
- âœ… å¤‡ç”¨æ–¹æ¡ˆï¼šé€šè¿‡lockfileæ–‡ä»¶æ£€æµ‹
- âœ… æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- âœ… è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—è¾“å‡º

### 2. å¢å¼ºçš„è¿æ¥ç®¡ç†
- âœ… è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆæœ€å¤š3æ¬¡é‡è¯•ï¼‰
- âœ… è¿æ¥çŠ¶æ€å®æ—¶ç›‘æ§
- âœ… è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- âœ… è¶…æ—¶å¤„ç†ï¼ˆ10ç§’ï¼‰

### 3. æ›´å®Œå–„çš„APIæ”¯æŒ
- âœ… æ›´å¤šWebSocketäº‹ä»¶è®¢é˜…
- âœ… è‹±é›„æ•°æ®ä¸°å¯ŒåŒ–
- âœ… è½®è¯¢æ£€æŸ¥æœºåˆ¶
- âœ… æ›´å¥½çš„æ•°æ®æ ¼å¼åŒ–

### 4. æ”¹è¿›çš„ç”¨æˆ·ç•Œé¢
- âœ… å®æ—¶çŠ¶æ€æŒ‡ç¤ºå™¨
- âœ… è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯æ˜¾ç¤º
- âœ… æ›´å¥½çš„è§†è§‰åé¦ˆ
- âœ… å“åº”å¼è®¾è®¡

## ğŸ“‹ ä½¿ç”¨è¯´æ˜

### ç¯å¢ƒè¦æ±‚
- Windows 10/11
- è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯æ­£åœ¨è¿è¡Œ
- ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œåº”ç”¨ï¼ˆæ¨èï¼‰

### å¯åŠ¨æ­¥éª¤
1. å¯åŠ¨è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯
2. è¿è¡Œåº”ç”¨ï¼š`npm run electron-dev`
3. åˆ‡æ¢åˆ°"æ¸¸æˆç›‘æ§"æ ‡ç­¾é¡µ
4. ç‚¹å‡»"ğŸ”— è¿æ¥åˆ°LCU"æŒ‰é’®
5. ç­‰å¾…è¿æ¥æˆåŠŸ

### åŠŸèƒ½ç‰¹æ€§

#### è¿æ¥çŠ¶æ€ç›‘æ§
- å®æ—¶æ˜¾ç¤ºè¿æ¥çŠ¶æ€
- ç«¯å£å’Œè®¤è¯ä¿¡æ¯
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- è‡ªåŠ¨é‡è¿æç¤º

#### å¬å”¤å¸ˆä¿¡æ¯
- å½“å‰å¬å”¤å¸ˆåç§°
- å¬å”¤å¸ˆç­‰çº§
- å¬å”¤å¸ˆID

#### æ¸¸æˆçŠ¶æ€ç›‘æ§
- å½“å‰æ¸¸æˆé˜¶æ®µ
- æ¸¸æˆID
- é˜Ÿåˆ—ç±»å‹
- å®æ—¶çŠ¶æ€æ›´æ–°

#### æ•Œæ–¹ä¿¡æ¯è·å–
- è‹±é›„é€‰æ‹©é˜¶æ®µæ•Œæ–¹é˜Ÿä¼
- æ¸¸æˆä¸­æ•Œæ–¹é˜Ÿä¼
- è‹±é›„åç§°å’Œå›¾æ ‡
- ä½ç½®ä¿¡æ¯

## ğŸ”§ æŠ€æœ¯å®ç°

### è¿›ç¨‹æ£€æµ‹æ–¹æ³•
```javascript
// ä¸»è¦æ–¹æ³•ï¼šå‘½ä»¤è¡Œæ£€æµ‹
const commands = [
  'wmic PROCESS WHERE name="LeagueClientUx.exe" GET commandline /format:list',
  'tasklist /FI "IMAGENAME eq LeagueClientUx.exe" /FO CSV',
  'Get-Process LeagueClientUx -ErrorAction SilentlyContinue'
];

// å¤‡ç”¨æ–¹æ³•ï¼šlockfileæ£€æµ‹
const lockfilePaths = [
  path.join(os.homedir(), 'AppData', 'Roaming', 'League of Legends', 'lockfile'),
  path.join(os.homedir(), 'AppData', 'Local', 'Riot Games', 'League of Legends', 'lockfile')
];
```

### APIç«¯ç‚¹æ”¯æŒ
- `/lol-summoner/v1/current-summoner` - å¬å”¤å¸ˆä¿¡æ¯
- `/lol-gameflow/v1/session` - æ¸¸æˆä¼šè¯
- `/lol-champ-select/v1/session` - è‹±é›„é€‰æ‹©
- `/lol-champions/v1/owned-champions-minimal` - è‹±é›„æ•°æ®
- `/lol-matchmaking/v1/ready-check` - å‡†å¤‡æ£€æŸ¥
- `/lol-chat/v1/me` - èŠå¤©ä¿¡æ¯
- `/lol-ranked/v1/current-ranked-stats` - æ’ä½ä¿¡æ¯

### WebSocketäº‹ä»¶
```javascript
const subscriptions = [
  '/lol-gameflow/v1/session',
  '/lol-champ-select/v1/session',
  '/lol-matchmaking/v1/ready-check',
  '/lol-gameflow/v1/gameflow-phase',
  '/lol-chat/v1/me',
  '/lol-summoner/v1/current-summoner',
  '/lol-ranked/v1/current-ranked-stats'
];
```

## ğŸ“Š æ•°æ®æ ¼å¼

### è¿æ¥çŠ¶æ€
```javascript
{
  isConnected: boolean,
  baseUrl: string,
  port: string,
  hasPassword: boolean,
  error: string | null
}
```

### æ•Œæ–¹ä¿¡æ¯
```javascript
{
  type: 'champ_select' | 'in_game',
  theirTeam: [
    {
      summonerName: string,
      championId: number,
      championName: string,
      championTitle: string,
      championIcon: string,
      assignedPosition: string,
      level: number,
      rank: { tier: string, division: string }
    }
  ],
  myTeam: [...],
  timestamp: number
}
```

### å¬å”¤å¸ˆä¿¡æ¯
```javascript
{
  displayName: string,
  summonerLevel: number,
  summonerId: number,
  accountId: number,
  puuid: string
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨æé†’
1. **ä»…ç”¨äºå­¦ä¹ ç›®çš„**ï¼šæ­¤åŠŸèƒ½ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶LCU API
2. **éµå®ˆæ¸¸æˆè§„åˆ™**ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·å¯èƒ½è¿åæ¸¸æˆæœåŠ¡æ¡æ¬¾
3. **é£é™©è‡ªè´Ÿ**ï¼šä½¿ç”¨æ­¤åŠŸèƒ½çš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…
4. **ä¸è¦ç”¨äºä½œå¼Š**ï¼šä¸¥ç¦ç”¨äºä»»ä½•å½¢å¼çš„æ¸¸æˆä½œå¼Š

### æŠ€æœ¯é™åˆ¶
1. **SSLè¯ä¹¦**ï¼šLCUä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œå·²è‡ªåŠ¨å¤„ç†
2. **è¿›ç¨‹æ£€æµ‹**ï¼šéœ€è¦LeagueClientUx.exeè¿›ç¨‹è¿è¡Œ
3. **ç«¯å£åŠ¨æ€**ï¼šLCUç«¯å£æ¯æ¬¡å¯åŠ¨éƒ½ä¼šå˜åŒ–
4. **è®¤è¯ä»¤ç‰Œ**ï¼šéœ€è¦ä»è¿›ç¨‹å‚æ•°ä¸­æå–è®¤è¯ä»¤ç‰Œ
5. **æƒé™è¦æ±‚**ï¼šå¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. è¿æ¥å¤±è´¥
**ç—‡çŠ¶**ï¼šæ˜¾ç¤º"æœªæ‰¾åˆ°è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯è¿›ç¨‹"
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯æ­£åœ¨è¿è¡Œ
- ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œåº”ç”¨
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- é‡å¯è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯

#### 2. SSLè¯ä¹¦é”™è¯¯
**ç—‡çŠ¶**ï¼šæ˜¾ç¤ºSSLç›¸å…³é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
- å·²åœ¨æ–°ç‰ˆæœ¬ä¸­è‡ªåŠ¨å¤„ç†
- ä½¿ç”¨HTTPS Agentå¿½ç•¥è¯ä¹¦éªŒè¯

#### 3. ç«¯å£è¢«å ç”¨
**ç—‡çŠ¶**ï¼šæ˜¾ç¤ºç«¯å£3000è¢«å ç”¨
**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3000

# ç»ˆæ­¢è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

#### 4. æ¨¡å—æœªæ‰¾åˆ°
**ç—‡çŠ¶**ï¼šæ˜¾ç¤ºnode-fetchã€child_processç­‰æ¨¡å—é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿å®‰è£…äº†æ‰€æœ‰ä¾èµ–ï¼š`npm install`
- æ£€æŸ¥Node.jsç‰ˆæœ¬å…¼å®¹æ€§
- é‡å¯å¼€å‘æœåŠ¡å™¨

### è°ƒè¯•æ¨¡å¼
åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š
```javascript
// æŸ¥çœ‹è¿æ¥çŠ¶æ€
console.log(lcuService.getConnectionStatus());

// æŸ¥çœ‹æ•Œæ–¹ä¿¡æ¯
console.log(lcuService.enemyInfo);

// æŸ¥çœ‹WebSocketçŠ¶æ€
console.log(lcuService.ws?.readyState);
```

### æ—¥å¿—çº§åˆ«
- ğŸ” ä¿¡æ¯ï¼šè¿›ç¨‹æ£€æµ‹å’Œè¿æ¥è¿‡ç¨‹
- âœ… æˆåŠŸï¼šè¿æ¥æˆåŠŸå’Œæ•°æ®è·å–
- âŒ é”™è¯¯ï¼šè¿æ¥å¤±è´¥å’ŒAPIé”™è¯¯
- ğŸ”„ é‡è¿ï¼šWebSocketé‡è¿å°è¯•
- ğŸ® æ¸¸æˆï¼šæ¸¸æˆçŠ¶æ€æ›´æ–°

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] æ·»åŠ è‹±é›„å›¾æ ‡æ˜¾ç¤º
- [ ] é›†æˆOP.GGæ•°æ®
- [ ] æ·»åŠ èƒœç‡ç»Ÿè®¡
- [ ] æ”¯æŒå¤šè¯­è¨€
- [ ] æ·»åŠ æ•°æ®å¯¼å‡ºåŠŸèƒ½
- [ ] ä¼˜åŒ–UI/UXè®¾è®¡
- [ ] æ·»åŠ æ›´å¤šæ¸¸æˆæ¨¡å¼æ”¯æŒ
- [ ] å®ç°æ•°æ®ç¼“å­˜æœºåˆ¶

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥ï¼š

1. **æ§åˆ¶å°é”™è¯¯ä¿¡æ¯**ï¼šæŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
2. **ç½‘ç»œè¿æ¥çŠ¶æ€**ï¼šç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
3. **è‹±é›„è”ç›Ÿå®¢æˆ·ç«¯ç‰ˆæœ¬**ï¼šç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬
4. **ç³»ç»Ÿæƒé™è®¾ç½®**ï¼šå°è¯•ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ
5. **é˜²ç«å¢™è®¾ç½®**ï¼šæ£€æŸ¥é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥

## ğŸ“š å‚è€ƒèµ„æ–™

- [Riot API Libraries Documentation](https://riot-api-libraries.readthedocs.io/en/latest/)
- [lol-helper GitHubé¡¹ç›®](https://github.com/za123/lol-helper)
- [League of Legends Client API](https://developer.riotgames.com/docs/lol)
- [LCU WebSocket API](https://riot-api-libraries.readthedocs.io/en/latest/lcu.html)

---

**å…è´£å£°æ˜**ï¼šæ­¤å·¥å…·ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…ä½¿ç”¨é£é™©ï¼Œå¼€å‘è€…ä¸æ‰¿æ‹…ä»»ä½•æ³•å¾‹è´£ä»»ã€‚ 